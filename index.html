<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <title>Apologize from nori to nome</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#16a34a',
                            light: '#4ade80',
                            dark: '#166534',
                        },
                        secondary: {
                            DEFAULT: '#facc15',
                            light: '#fde047',
                            dark: '#ca8a04',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        @keyframes blink {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.3; transform: scale(0.8); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes rays {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes smoothZoomIn {
            0% { 
                transform: scale(1);
                opacity: 1;
            }
            100% { 
                transform: scale(1.15);
                opacity: 0;
            }
        }

        .star {
            animation: blink 2s ease-in-out infinite;
        }

        .star:nth-child(2) { animation-delay: 0.5s; }
        .star:nth-child(3) { animation-delay: 1s; }
        .star:nth-child(4) { animation-delay: 1.5s; }
        .star:nth-child(5) { animation-delay: 0.3s; }
        .star:nth-child(6) { animation-delay: 0.8s; }

        .envelope-wrapper {
            animation: float 3s ease-in-out infinite;
            transition: all 1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .sun-rays {
            animation: rays 20s linear infinite;
        }

        .envelope-flap {
            clip-path: polygon(0 0, 50% 80%, 100% 0);
        }

        /* Efek cahaya matahari */
        .sunlight {
            background: radial-gradient(circle at 50% 50%, 
                rgba(250, 204, 21, 0.3) 0%, 
                rgba(250, 204, 21, 0.1) 40%, 
                transparent 70%);
        }

        /* Gradient background yang lebih indah */
        body {
            background: linear-gradient(135deg, #4ade80 0%, #16a34a 50%, #0ea5e9 100%);
        }

        /* Smooth transitions */
        .smooth-transition {
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
    </style>
</head>

<body class="min-h-screen flex items-center justify-center px-4 py-8 relative">

    <!-- EFEK CAHAYA MATAHARI -->
    <div class="absolute inset-0 sunlight pointer-events-none"></div>
    
    <!-- SUN RAYS -->
    <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
        <div class="sun-rays w-96 h-96">
            <svg viewBox="0 0 200 200" class="w-full h-full opacity-20">
                <g transform="translate(100, 100)">
                    <line x1="0" y1="-90" x2="0" y2="-60" stroke="#fde047" stroke-width="2"/>
                    <line x1="63.6" y1="-63.6" x2="42.4" y2="-42.4" stroke="#fde047" stroke-width="2"/>
                    <line x1="90" y1="0" x2="60" y2="0" stroke="#fde047" stroke-width="2"/>
                    <line x1="63.6" y1="63.6" x2="42.4" y2="42.4" stroke="#fde047" stroke-width="2"/>
                    <line x1="0" y1="90" x2="0" y2="60" stroke="#fde047" stroke-width="2"/>
                    <line x1="-63.6" y1="63.6" x2="-42.4" y2="42.4" stroke="#fde047" stroke-width="2"/>
                    <line x1="-90" y1="0" x2="-60" y2="0" stroke="#fde047" stroke-width="2"/>
                    <line x1="-63.6" y1="-63.6" x2="-42.4" y2="-42.4" stroke="#fde047" stroke-width="2"/>
                </g>
            </svg>
        </div>
    </div>

    <!-- BINTANG BERKEDIP -->
    <div class="absolute top-10 left-10 star text-secondary text-2xl pointer-events-none">‚ú®</div>
    <div class="absolute top-20 right-16 star text-secondary text-xl pointer-events-none">‚≠ê</div>
    <div class="absolute bottom-20 left-20 star text-secondary text-3xl pointer-events-none">‚ú®</div>
    <div class="absolute bottom-32 right-12 star text-secondary text-2xl pointer-events-none">‚≠ê</div>
    <div class="absolute top-1/3 right-1/4 star text-secondary text-xl pointer-events-none">‚ú®</div>
    <div class="absolute top-2/3 left-1/4 star text-secondary text-2xl pointer-events-none">‚≠ê</div>

    <!-- WRAPPER -->
    <div id="envelopeWrapper" class="envelope-wrapper relative w-full max-w-sm h-48 cursor-pointer z-10"
         onclick="openLetter()">

        <!-- LETTER (dibawah amplop) -->
        <div id="letter"
             class="absolute left-1/2 -translate-x-1/2 bottom-12
                    w-[85%] bg-white rounded-xl shadow-2xl
                    px-4 py-4 sm:px-5 sm:py-5
                    transform translate-y-0 opacity-0
                    smooth-transition z-0
                    max-h-[60vh] overflow-y-auto">

            <!-- SKELETON -->
            <div id="skeleton" class="space-y-2 animate-pulse">
                <div class="h-3 bg-primary/20 rounded w-3/4 mx-auto"></div>
                <div class="h-3 bg-primary/20 rounded w-full"></div>
                <div class="h-3 bg-primary/20 rounded w-5/6 mx-auto"></div>
            </div>

            <!-- TEXT -->
            <p id="letterText"
               class="hidden text-gray-700 text-xs sm:text-sm leading-relaxed text-center">
                Hai, Nome ü§ç  
                <br><br>
                Maaf ya kalau aku sering bikin kamu capek.
                Aku lagi belajar buat lebih ngerti dan lebih jaga perasaan kamu.
                <br><br>
                <span class="text-primary font-semibold">
                    Aku beneran minta maaf.
                </span>
            </p>
        </div>

        <!-- ENVELOPE (diatas surat) -->
        <div class="absolute inset-0 z-10">

            <!-- BACK -->
            <div class="absolute inset-0 bg-gradient-to-br from-primary to-primary-dark rounded-xl shadow-2xl">
                <!-- Decorative pattern -->
                <div class="absolute inset-0 opacity-10">
                    <div class="absolute top-3 left-3 w-2 h-2 border-2 border-white rounded-full"></div>
                    <div class="absolute top-3 right-3 w-2 h-2 border-2 border-white rounded-full"></div>
                    <div class="absolute bottom-3 left-3 w-2 h-2 border-2 border-white rounded-full"></div>
                    <div class="absolute bottom-3 right-3 w-2 h-2 border-2 border-white rounded-full"></div>
                </div>
            </div>

            <!-- FLAP -->
            <div id="flap"
                class="absolute top-0 left-0 right-0 h-[45%]
                       bg-gradient-to-b from-primary-dark to-primary
                       envelope-flap shadow-lg
                       transition-transform duration-1000 ease-out origin-top z-30"
                style="filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3)); transition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);">
                <!-- Triangle decoration -->
                <div class="absolute top-1 left-1/2 -translate-x-1/2 w-6 h-6 border-2 border-white/30 rotate-45"></div>
            </div>

            <!-- FRONT -->
            <div class="absolute bottom-0 left-0 right-0 h-[58%]
                       bg-gradient-to-t from-primary-dark to-primary
                       rounded-b-xl z-20
                       flex flex-col items-center justify-center gap-2
                       shadow-lg">
                <span class="text-secondary text-2xl animate-pulse">üíå</span>
                <span class="text-white text-sm tracking-wide font-medium">
                    tap to open
                </span>
                <div class="flex gap-1 mt-1">
                    <div class="w-1 h-1 bg-secondary rounded-full animate-pulse"></div>
                    <div class="w-1 h-1 bg-secondary rounded-full animate-pulse" style="animation-delay: 0.2s;"></div>
                    <div class="w-1 h-1 bg-secondary rounded-full animate-pulse" style="animation-delay: 0.4s;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let opened = false;

        function openLetter() {
            if (opened) return;
            opened = true;

            const flap = document.getElementById('flap');
            const letter = document.getElementById('letter');
            const skeleton = document.getElementById('skeleton');
            const text = document.getElementById('letterText');
            const envelopeWrapper = document.getElementById('envelopeWrapper');

            // Hentikan animasi float dengan smooth transition
            envelopeWrapper.style.animation = 'none';
            
            // Buka amplop dengan delay yang lebih natural
            setTimeout(() => {
                flap.style.transform = 'rotateX(180deg)';
            }, 100);

            // Surat muncul dari bawah amplop dengan timing lebih smooth
            setTimeout(() => {
                letter.style.zIndex = '40';
                letter.classList.remove('translate-y-0', 'opacity-0');
                letter.classList.add('-translate-y-10', 'opacity-100');
            }, 500);

            // Skeleton ‚Üí teks dengan fade yang lebih halus
            setTimeout(() => {
                skeleton.style.transition = 'opacity 0.4s ease-out';
                skeleton.style.opacity = '0';
                
                setTimeout(() => {
                    skeleton.classList.add('hidden');
                    text.classList.remove('hidden');
                    text.style.opacity = '0';
                    text.style.transition = 'opacity 0.6s ease-in';
                    
                    setTimeout(() => {
                        text.style.opacity = '1';
                    }, 50);
                }, 400);
            }, 1200);

            // Zoom in dengan animasi yang sangat smooth
            setTimeout(() => {
                envelopeWrapper.style.transition = 'all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1)';
                envelopeWrapper.style.transform = 'scale(1.25)';
            }, 1800);

            // Fade out yang gentle
            setTimeout(() => {
                envelopeWrapper.style.transition = 'all 0.8s ease-out';
                envelopeWrapper.style.opacity = '0';
                envelopeWrapper.style.transform = 'scale(1.35)';
            }, 2600);

            // Redirect dengan timing yang pas
            setTimeout(() => {
                window.location.href = 'letter.html';
            }, 3500);
        }
    </script>

</body>
</html>